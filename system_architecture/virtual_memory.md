# ğŸ§  ê°€ìƒ ë©”ëª¨ë¦¬(Virtual Memory) ì •ë¦¬

## ğŸ“Œ ê°€ìƒ ë©”ëª¨ë¦¬ë€?

**ê°€ìƒ ë©”ëª¨ë¦¬ëŠ” ìš´ì˜ì²´ì œê°€ ì œê³µí•˜ëŠ” ë©”ëª¨ë¦¬ ê´€ë¦¬ ê¸°ë²•**ìœ¼ë¡œ,  
**ì‹¤ì œ ë¬¼ë¦¬ ë©”ëª¨ë¦¬(RAM)ì˜ í¬ê¸°ì™€ ê´€ê³„ì—†ì´ ë” í° ë©”ëª¨ë¦¬ ê³µê°„ì„ ì œê³µí•˜ëŠ” ê¸°ìˆ **ì…ë‹ˆë‹¤.

---

## ğŸ§  ì™œ ê°€ìƒ ë©”ëª¨ë¦¬ê°€ í•„ìš”í• ê¹Œ?

1. **RAMì˜ í•œê³„ ê·¹ë³µ**  
   â†’ ì—¬ëŸ¬ í”„ë¡œê·¸ë¨ì„ ë™ì‹œì— ì‹¤í–‰í•˜ë ¤ë©´ RAMë§Œìœ¼ë¡œëŠ” ë¶€ì¡±í•¨

2. **í”„ë¡œì„¸ìŠ¤ ê°„ ë©”ëª¨ë¦¬ ë³´í˜¸**  
   â†’ ê°ê°ì˜ í”„ë¡œê·¸ë¨ì´ ë…ë¦½ëœ ë©”ëª¨ë¦¬ ê³µê°„ì„ ê°€ì§€ê²Œ í•˜ê¸° ìœ„í•¨

3. **ì£¼ì†Œ ì¶©ëŒ ë°©ì§€**  
   â†’ ì„œë¡œ ë‹¤ë¥¸ í”„ë¡œê·¸ë¨ì´ ê°™ì€ ê°€ìƒ ì£¼ì†Œë¥¼ ì¨ë„ ë¬¸ì œê°€ ì—†ë„ë¡

4. **ìì› íš¨ìœ¨í™”**  
   â†’ í•„ìš”í•œ ë¶€ë¶„ë§Œ ë¬¼ë¦¬ ë©”ëª¨ë¦¬ì— ì˜¬ë¦¬ê³  ë‚˜ë¨¸ì§€ëŠ” ë””ìŠ¤í¬ë¡œ ëŒ€ì²´

---

## ğŸ§© ì–´ë–»ê²Œ ì‘ë™í• ê¹Œ?

| êµ¬ì„± ìš”ì†Œ | ì„¤ëª… |
|-----------|------|
| **ê°€ìƒ ì£¼ì†Œ (Virtual Address)** | í”„ë¡œê·¸ë¨ì´ ì¸ì‹í•˜ëŠ” ì£¼ì†Œ |
| **ë¬¼ë¦¬ ì£¼ì†Œ (Physical Address)** | ì‹¤ì œ RAM ì£¼ì†Œ |
| **í˜ì´ì§€ (Page)** | ê°€ìƒ/ë¬¼ë¦¬ ë©”ëª¨ë¦¬ì˜ ìµœì†Œ ë‹¨ìœ„ (ë³´í†µ 4KB) |
| **í˜ì´ì§€ í…Œì´ë¸”** | ê°€ìƒ ì£¼ì†Œë¥¼ ë¬¼ë¦¬ ì£¼ì†Œë¡œ ë§¤í•‘ |
| **MMU (Memory Management Unit)** | ì£¼ì†Œ ë³€í™˜ì„ ìˆ˜í–‰í•˜ëŠ” í•˜ë“œì›¨ì–´ |

---

## ğŸ” ì£¼ì†Œ ë³€í™˜ íë¦„

```
[ê°€ìƒ ì£¼ì†Œ] â†’ MMU â†’ [í˜ì´ì§€ í…Œì´ë¸”] â†’ [ë¬¼ë¦¬ ì£¼ì†Œ]
```

---

## ğŸ’¾ ë¬¼ë¦¬ ë©”ëª¨ë¦¬ê°€ ë¶€ì¡±í•˜ë©´?

ìš´ì˜ì²´ì œëŠ” **ë””ìŠ¤í¬ì˜ ì¼ë¶€ ì˜ì—­(Swap)** ì„ ì´ìš©í•´ ë¶€ì¡±í•œ RAMì„ ë³´ì™„í•¨  
â†’ ì´ë¥¼ **í˜ì´ì§€ ìŠ¤ì™€í•‘(Page Swapping)** ì´ë¼ê³  í•¨

---

## âœ… ì¥ì 

| ì¥ì  | ì„¤ëª… |
|------|------|
| ë©”ëª¨ë¦¬ ë³´í˜¸ | í”„ë¡œì„¸ìŠ¤ ê°„ ë©”ëª¨ë¦¬ ì¹¨ë²” ë°©ì§€ |
| ë©”ëª¨ë¦¬ í™•ì¥ | RAMë³´ë‹¤ í° ë©”ëª¨ë¦¬ ê³µê°„ ì œê³µ |
| íš¨ìœ¨ì  ìì› ì‚¬ìš© | í•„ìš”í•œ ë°ì´í„°ë§Œ ë©”ëª¨ë¦¬ì— ì ì¬ |

---

## â— ë‹¨ì 

| ë‹¨ì  | ì„¤ëª… |
|------|------|
| ì„±ëŠ¥ ì €í•˜ | ë””ìŠ¤í¬ ì ‘ê·¼ì´ ì¦ì•„ì§€ë©´ ëŠë ¤ì§ˆ ìˆ˜ ìˆìŒ |
| ë³µì¡ì„± | êµ¬í˜„ê³¼ ê´€ë¦¬ê°€ ë³µì¡í•¨ |

---

## âœ¨ ë¹„ìœ ë¡œ ì´í•´í•˜ê¸°

> ë§ˆì¹˜ ì‘ì€ ì±…ìƒ(RAM)ì— í•„ìš”í•œ ì±…ë§Œ í¼ì¹˜ê³ , ë‚˜ë¨¸ì§€ëŠ” ì±…ì¥(ë””ìŠ¤í¬)ì— ë‘ëŠ” ê²ƒê³¼ ê°™ìŒ

---

## ğŸ“ ìš”ì•½

- **ê°€ìƒ ë©”ëª¨ë¦¬**ëŠ” ìš´ì˜ì²´ì œê°€ ì œê³µí•˜ëŠ” ë©”ëª¨ë¦¬ ê´€ë¦¬ ê¸°ëŠ¥
- **í”„ë¡œì„¸ìŠ¤ë§ˆë‹¤ ë…ë¦½ëœ ë©”ëª¨ë¦¬ ê³µê°„ì„ ì œê³µ**
- **ì£¼ì†Œ ë³€í™˜, í˜ì´ì§€ ê´€ë¦¬, ìŠ¤ì™€í•‘**ìœ¼ë¡œ RAM ìì›ì„ íš¨ìœ¨ì ì´ê³  ì•ˆì „í•˜ê²Œ ì‚¬ìš©í•¨
---

## ğŸ–¼ ë‹¤ì´ì–´ê·¸ë¨ìœ¼ë¡œ ë³´ëŠ” ê°€ìƒ ë©”ëª¨ë¦¬

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        ì‚¬ìš©ì í”„ë¡œê·¸ë¨       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         ê°€ìƒ ì£¼ì†Œ ê³µê°„        â”‚
â”‚     (Virtual Address Space)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
     [ Memory Management Unit ]
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      í˜ì´ì§€ í…Œì´ë¸”       â”‚
â”‚  (Virtual â†’ Physical)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚   ì‹¤ì œ ë¬¼ë¦¬ ë©”ëª¨ë¦¬    â”‚
   â”‚     (RAM)            â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  ë³´ì¡°ê¸°ì–µì¥ì¹˜ (Disk)  â”‚
   â”‚    (Swap ì˜ì—­ ë“±)     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’» ì˜ˆì‹œ ì½”ë“œ: í˜ì´ì§€ í…Œì´ë¸” êµ¬ì¡° (ì˜ì‚¬ ì½”ë“œ)

```c
struct PageTableEntry {
    bool present;         // ë¬¼ë¦¬ ë©”ëª¨ë¦¬ì— ì¡´ì¬ ì—¬ë¶€
    int frameNumber;      // ë¬¼ë¦¬ í”„ë ˆì„ ë²ˆí˜¸
    bool readOnly;        // ì½ê¸° ì „ìš© ì—¬ë¶€
    bool accessed;        // ì ‘ê·¼ ì—¬ë¶€
    bool dirty;           // ì“°ê¸° ì—¬ë¶€
};

PageTableEntry pageTable[NUM_PAGES];

int translateVirtualAddress(int virtualAddress) {
    int pageNumber = virtualAddress / PAGE_SIZE;
    int offset = virtualAddress % PAGE_SIZE;

    PageTableEntry entry = pageTable[pageNumber];

    if (!entry.present) {
        pageFaultHandler(pageNumber); // ë””ìŠ¤í¬ì—ì„œ í˜ì´ì§€ ë¶ˆëŸ¬ì˜¤ê¸°
    }

    return entry.frameNumber * PAGE_SIZE + offset;
}
```

---

## âœ… ë§ˆë¬´ë¦¬ íŒ

- `MMU`ì™€ `í˜ì´ì§€ í…Œì´ë¸”`ì˜ ì¡°í•©ì´ ê°€ìƒ â†’ ë¬¼ë¦¬ ì£¼ì†Œ ë³€í™˜ì˜ í•µì‹¬
- ê°€ìƒ ë©”ëª¨ë¦¬ëŠ” í”„ë¡œê·¸ë¨ì—ê²Œ â€œë„“ì€ ê³µê°„â€ì„ ì œê³µí•˜ê³ , OSëŠ” â€œí•„ìš”í•œ ë§Œí¼ë§Œâ€ ê´€ë¦¬í•¨
